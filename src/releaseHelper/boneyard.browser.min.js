var boneyard=function(){"use strict";var e;var t="undefined"==typeof document?void 0:document,n=!!t&&"content"in t.createElement("template"),r=!!t&&t.createRange&&"createContextualFragment"in t.createRange();function a(a){return a=a.trim(),n?function(e){var n=t.createElement("template");return n.innerHTML=e,n.content.childNodes[0]}(a):r?function(n){return e||(e=t.createRange()).selectNode(t.body),e.createContextualFragment(n).childNodes[0]}(a):function(e){var n=t.createElement("body");return n.innerHTML=e,n.childNodes[0]}(a)}function i(e,t){var n,r,a=e.nodeName,i=t.nodeName;return a===i||(n=a.charCodeAt(0),r=i.charCodeAt(0),n<=90&&r>=97?a===i.toUpperCase():r<=90&&n>=97&&i===a.toUpperCase())}function o(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var l={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(r=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==r||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}o(e,t,"selected")},INPUT:function(e,t){o(e,t,"checked"),o(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var a=r.nodeValue;if(a==n||!n&&a==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,r,a=-1,i=0,o=e.firstChild;o;)if("OPTGROUP"===(r=o.nodeName&&o.nodeName.toUpperCase()))o=(n=o).firstChild;else{if("OPTION"===r){if(o.hasAttribute("selected")){a=i;break}i++}!(o=o.nextSibling)&&n&&(o=n.nextSibling,n=null)}e.selectedIndex=a}}};function d(){}function c(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}var u=function(e){return function(n,r,o){if(o||(o={}),"string"==typeof r)if("#document"===n.nodeName||"HTML"===n.nodeName||"BODY"===n.nodeName){var u=r;(r=t.createElement("html")).innerHTML=u}else r=a(r);var s=o.getNodeKey||c,f=o.onBeforeNodeAdded||d,h=o.onNodeAdded||d,p=o.onBeforeElUpdated||d,m=o.onElUpdated||d,v=o.onBeforeNodeDiscarded||d,g=o.onNodeDiscarded||d,b=o.onBeforeElChildrenUpdated||d,N=!0===o.childrenOnly,y=Object.create(null),x=[];function A(e){x.push(e)}function $(e,t){if(1===e.nodeType)for(var n=e.firstChild;n;){var r=void 0;t&&(r=s(n))?A(r):(g(n),n.firstChild&&$(n,t)),n=n.nextSibling}}function w(e,t,n){!1!==v(e)&&(t&&t.removeChild(e),g(e),$(e,n))}function C(e){h(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=s(t);if(r){var a=y[r];a&&i(t,a)?(t.parentNode.replaceChild(a,t),E(a,t)):C(t)}else C(t);t=n}}function E(n,r,a){var o=s(r);if(o&&delete y[o],!a){if(!1===p(n,r))return;if(e(n,r),m(n),!1===b(n,r))return}"TEXTAREA"!==n.nodeName?function(e,n){var r,a,o,d,c,u=n.firstChild,h=e.firstChild;e:for(;u;){for(d=u.nextSibling,r=s(u);h;){if(o=h.nextSibling,u.isSameNode&&u.isSameNode(h)){u=d,h=o;continue e}a=s(h);var p=h.nodeType,m=void 0;if(p===u.nodeType&&(1===p?(r?r!==a&&((c=y[r])?o===c?m=!1:(e.insertBefore(c,h),a?A(a):w(h,e,!0),h=c):m=!1):a&&(m=!1),(m=!1!==m&&i(h,u))&&E(h,u)):3!==p&&8!=p||(m=!0,h.nodeValue!==u.nodeValue&&(h.nodeValue=u.nodeValue))),m){u=d,h=o;continue e}a?A(a):w(h,e,!0),h=o}if(r&&(c=y[r])&&i(c,u))e.appendChild(c),E(c,u);else{var v=f(u);!1!==v&&(v&&(u=v),u.actualize&&(u=u.actualize(e.ownerDocument||t)),e.appendChild(u),C(u))}u=d,h=o}!function(e,t,n){for(;t;){var r=t.nextSibling;(n=s(t))?A(n):w(t,e,!0),t=r}}(e,h,a);var g=l[e.nodeName];g&&g(e,n)}(n,r):l.TEXTAREA(n,r)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var r=s(n);r&&(y[r]=n),e(n),n=n.nextSibling}}(n);var T,S,U=n,O=U.nodeType,L=r.nodeType;if(!N)if(1===O)1===L?i(n,r)||(g(n),U=function(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}(n,(T=r.nodeName,(S=r.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==S?t.createElementNS(S,T):t.createElement(T)))):U=r;else if(3===O||8===O){if(L===O)return U.nodeValue!==r.nodeValue&&(U.nodeValue=r.nodeValue),U;U=r}if(U===r)g(n);else{if(r.isSameNode&&r.isSameNode(U))return;if(E(U,r,N),x)for(var R=0,k=x.length;R<k;R++){var V=y[x[R]];V&&w(V,V.parentNode,!1)}}return!N&&U!==n&&n.parentNode&&(U.actualize&&(U=U.actualize(n.ownerDocument||t)),n.parentNode.replaceChild(U,n)),U}}((function(e,t){var n,r,a,i,o=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var l=o.length-1;l>=0;l--)r=(n=o[l]).name,a=n.namespaceURI,i=n.value,a?(r=n.localName||r,e.getAttributeNS(a,r)!==i&&("xmlns"===n.prefix&&(r=n.name),e.setAttributeNS(a,r,i))):e.getAttribute(r)!==i&&e.setAttribute(r,i);for(var d=e.attributes,c=d.length-1;c>=0;c--)r=(n=d[c]).name,(a=n.namespaceURI)?(r=n.localName||r,t.hasAttributeNS(a,r)||e.removeAttributeNS(a,r)):t.hasAttribute(r)||e.removeAttribute(r)}}));const s=/^(?<tagName>[\w-]+)?(?<ids>(?:[\.#][\w-]+)*)(?:\((?<attrs>[^\n]*?)\))?(?:\s(?<text>[\s\S]+)?|(?<dot>\.))?$/,f=/(\.[\w-]+)/g,h=/(#[\w-]+)/g,p=/^\s*/,m=/^((if|while|for)\s*\([\s\S]+\)|else)$/,v=["br","img","hr","area","base","col","command","embed","input","link","meta","keygen","param","source","track","wbr"],g=e=>{const t=e.split(/\r?\n/g),n={type:"root",children:[]},r=[-1],a=[];let i,o,l=n,d=n,c=null;for(let e=0;e<t.length;e++){const n=t[e],m=n.trim();if(""===m){i&&i.children.push({type:"text",value:"\n"});continue}const g=r[r.length-1],b=(h=n,p.exec(h)[0].length);if(i){if(o<b){null===c&&(c=b),i.children.push({type:"text",value:n.slice(c)+"\n"});continue}i=!1,c=null}let N;if("|"===m[0])N={type:"text",value:m.slice(1).trimStart()||" "};else if(m.startsWith("//"))"-"===m[2]&&(N={type:"comment",value:m.slice(3)});else if("-"===m[0])N={type:"code",value:m.slice(1).trim(),children:[]};else{const t=s.exec(m);if(!t)throw new Error(`Line ${e+1}: malformed tag.\n${m}`);const{tagName:n,ids:r,attrs:a,text:l,dot:d}=t.groups;if(N={type:"tag",tagName:n||"div",ids:r,attrs:a,hasText:Boolean(l),children:[],atomic:v.includes(n)},d)i=N,o=b,N.children.push({type:"text",value:"\n"});else if(l){if(N.atomic)throw new Error(`Line ${e+1}: tag ${n} cannot have a text node.\n${m}`);N.children.push({type:"text",value:l.trim()})}}if(b<g){if(-1===r.indexOf(b))throw new Error(`Bad indentation at line ${e+1}, expected depth: ${r.join(", ")} spaces, got ${b}.\n${n}`);for(;r[r.length-1]!==b;)a.pop(),r.pop(),l=a[a.length-1];l.children.push(N)}else if(b>g){if(!("children"in l))throw new Error(`Line ${e+1}: entry of type ${l.type} cannot have children.\n${n}`);if("tag"===l.type){if(v.includes(l.tagName))throw new Error(`Line ${e+1}: tag ${l.tagName} cannot have children.\n${n}`);if(l.hasText)throw new Error(`Line ${e+1}: tag ${l.tagName} has a text node and cannot have children.\n${n}`)}u=d,f=b,r.push(f),a.push(u),l=u,l.children.push(N)}else l.children.push(N);d=N}var u,f,h;return n},b=/`/g,N=e=>e.replace(b,"\\`");let y;const x=e=>{let t="";return y&&!e?t="`;":!y&&e&&(t="html+=`"),y=e,t},A=(e,t=!1)=>{if(e instanceof Array)return e.map(A).join("");let n;switch(e.type){case"comment":return`${x(!0)}\x3c!--${N(e.value)}--\x3e`;case"code":n=x(!1)+e.value;const t=m.test(e.value);return t&&(n+="{"),e.children?.length&&(n+=A(e.children)),t&&(n+=`${x(!1)}}`),y=!1,n;case"text":return`${x(!0)}${N(e.value)}`;case"tag":const r=e.atomic;let a=e.attrs?" "+e.attrs:"";return e.ids&&(a+=(e=>{const t=h.exec(e)?.[0],n=e.match(f);let r="";if(t&&(r+=` id="${t.slice(1)}" `),n?.length){r+=' class="';for(const e of n)r+=e.slice(1)+" ";r=r.slice(0,-1)+'" '}return r.slice(0,-1)})(e.ids)),n=`${x(!0)}<${e.tagName}${N(a)}${r?"/":""}>`,e.children?.length&&(n+=A(e.children)),r||(n+=`${x(!0)}</${e.tagName}>`),y=!0,n}},$=e=>{try{return new Function("state",e)}catch(t){throw console.error(e),new Error(`Malformed JS code: ${t.message}`)}},w=(e,t=!1)=>{let n="let html = '';";return y=!1,n+=A(e.children,t),y&&(n+="`;"),n+="return html;",n};var C={render(e,t={},n=!1){const r=g(e),a=w(r,!1);return $(a)(t)},renderer:(e,t=!1)=>$(w(g(e),!1))};const E=(e,t,n,r)=>{e.addEventListener(n,(e=>{const n=e.target.closest(t);n&&r.apply(n,[e])}))},T=(e,t,n={},r)=>{const a=C.renderer(e),i=()=>{r&&r(n),u(t,`<div>${a(n)}</div>`,{childrenOnly:!0})},o=e=>function(t){const r=this.getAttribute(e);if(!(r in n))throw console.warn("[boneyard.js] Dumping current state:",n),new Error(`[boneyard.js] Missing event "${r}".`);n[r](t,n),i()},l=e=>function(t){const r=this.getAttribute(e),a=["checkbox","radio"].includes(t.target.getAttribute("type")),o=a&&["number","slider"].includes(t.target.getAttribute("type"));let l=a?t.target.checked:t.target.value;o&&(l=Number(l)),((e="",t,n)=>{const r=e.split(/(?<!\\)\./gi);for(;r.length>1;)if("object"!=typeof(t=t[r.shift()])&&r.length>1)return;t[r[0]]=n})(r,n,l),i()};return E(t,"[data-onclick]","click",o("data-onclick")),E(t,"[data-onfocus]","focus",o("data-onfocus")),E(t,"[data-onblur]","blur",o("data-onblur")),E(t,"[data-oninput]","input",o("data-oninput")),E(t,"[data-onchange]","change",o("data-onchange")),E(t,"[data-bindinput]","input",l("data-bindinput")),E(t,"[data-bindchange]","change",l("data-bindchange")),i(),i};return{async mount(e,t,n={},r){const a=await fetch(e).then((e=>e.text()));return T(a,t,n,r)},mountMeat:T}}();
//# sourceMappingURL=boneyard.browser.min.js.map
